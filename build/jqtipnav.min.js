"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(window.jQuery)}(function(a){var b,c,d=function(){var a;return{generate:function(){return a="undefined"==typeof a?1:a+1}}}();c=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"define",value:function(a,b){this[a]=b}}]),a}(),b=new c,b.define("Action",function(){function b(a,c){_classCallCheck(this,b),this.$el=a,this.trigger_event=c.trigger_event,this.fade_time=c.fade_time}return _createClass(b,[{key:"get_geometry",value:function(a){return{tn:{off:a.offset(),height:a.outerHeight(),width:a.outerWidth()},ac:{off:this.$el.offset(),height:this.$el.outerHeight(),width:this.$el.outerWidth()}}}},{key:"get_container_position",value:function(b){var c,d=this.get_geometry(b),e=a(window).width(),f=(d.tn.width-d.ac.width)/2,g=d.ac.off.left+d.ac.width/2,h=d.ac.off.top-d.tn.height;return c=d.tn.width<=d.ac.width||d.ac.off.left>f&&e-(d.ac.off.left+d.ac.width)>f?g-d.tn.width/2:e-(d.ac.off.left+d.ac.width)<f?e-d.tn.width:0,d.ac.off.top<d.tn.height&&(h=d.ac.off.top+d.ac.height),{left:c,top:h}}},{key:"bind_container",value:function(b){var c=this,d=function(){b.data("hoverTimeout",setTimeout(function(){b.fadeOut(c.fade_time||500,function(){b.data("open",!1)})},200))};this.$el.bind(this.trigger_event,function(a){a.preventDefault(),b.show().css("left",0);var e=c.get_container_position(b);b.data("open",!0).css(e),"undefined"!=typeof b.data("hoverTimeout")&&clearTimeout(b.data("hoverTimeout")),"click"===c.trigger_event&&b.data("open")===!0&&d()}),"click"!==this.trigger_event&&(this.$el.mouseleave(function(){d()}),b.mouseenter(function(){1==b.data("fade")&&(b.stop(),b.fadeIn(100),b.data("fade",!1)),clearTimeout(a(this).data("hoverTimeout"))}),b.mouseleave(function(){b.data("fade",!0),d()}))}},{key:"setup_container",value:function(b,c){var d,e=this,f=b.find(".jqtipnav-prev, .jqtipnav-next");f.length>0&&f.bind("click",function(f){var g,h=a(f.target);f.preventDefault(),h.hasClass("jqtipnav-prev")&&(g=b.prev(),0==g.length&&(g=b.siblings(":last"))),h.hasClass("jqtipnav-next")&&(g=b.next(),0==g.length&&(g=b.siblings(":first"))),c.css("left",0),b.hide(),g.show(),d=e.get_container_position(g),c.css(d)})}}]),b}()),b.define("Container",function(){function c(d,e,f,g){_classCallCheck(this,c);var h={trigger_event:"mouseenter",fade_time:500},f=a.extend({},h,f||{}),g=g||!1;this.action=new b.Action(d,f),this.container=b.Container.build(e,g),this.$wrap=this.container.$wrap,g===!0?this.action.bind_container(this.$wrap):g||this.action.bind_container(this.container.$el),this.action.setup_container(this.container.$el,this.$wrap)}return _createClass(c,null,[{key:"build_simple",value:function(b,c){var e=d.generate(),f=a("<div data-jqtipnav="+e+"><ul></ul></div>");if(f.find("ul").append(b.children().clone()),b.attr("data-jqtipnav-main",e),c){var g=a('<li><a class="jqtipnav-prev" href="#">&lt;</a></li>'),h=a('<li><a class="jqtipnav-next" href="#">&gt;</a></li>');f.find("ul").prepend(g).append(h)}return f}},{key:"build",value:function(c){var d,e,f=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];return f===!0?(e=a('<div class="jqtipnav-wrap"></div>'),e.css("position","absolute"),d=b.Container.build_simple(c,f),d.show().appendTo(e),e.appendTo("body"),e.hide()):(d=b.Container.build_simple(c,f),f?(e=f,d.appendTo(e),d.hide()):(d.css("position","absolute"),d.appendTo("body"),d.hide())),{$wrap:e,$el:d,id:d.attr("data-jqtipnav")}}}]),c}()),a.fn.tipnav=function(c){var d,e,f,g=this,h=g.length>1,i={clean:function(){var b,c,d;1===g.length&&"body"===g.prop("nodeName").toLowerCase()||"#document"===g.prop("nodeName")?(a("body").find("[data-jqtipnav]").remove(),a("body").find(".jqtipnav-wrap").remove(),a("[data-jqtipnav-main]").show().removeAttr("data-jqtipnav-main")):g.each(function(){b=parseInt(a(this).attr("data-jqtipnav-main")),"undefined"!=typeof b&&(d=a("body").find("[data-jqtipnav="+b+"]"),c=d.parent(".jqtipnav-wrap"),d.remove(),0!==c.length&&0==c.children().length&&c.remove()),a(this).show(),a(this).removeAttr("data-jqtipnav-main")})}},j=Array.prototype.slice.call(arguments);return"string"!=typeof j[0]?(e=c,d=e.action_element,h?(f=!0,g.each(function(){var c=void 0;c=new b.Container(d,a(this),e,f),f===!0&&(f=c.$wrap)})):new b.Container(d,a(this),e),g.hide()):(i[j[0]](),g)}});